h1. *wsl-components*

h2. *Introduction*

*WSL Components* is general purpose PHP components library with the goal of aiding in the development of PHP applications. By using *WSL Components* you will not have to reinvent the wheel again. Each package is focused on a specific purpose, for example WSL_Config handles configuration INI files or WSL_FormValidator validates the data received by a form.

h3. *Installation Guide*

The easiest way to install our packages on your local system is by using the PEAR installer. You can also checkout a copy of the code from our SVN repository. Despite each package works independently, it may have dependencies on other packages. This is one reason why we encourage you to use PEAR.

h4. *PEAR Installer*

Once you have installed the PEAR Installer you can proceed to installing the package that you need. For example, if you are interested on installing WSL_Config, you can do it just by executing the following commands in your shell prompt: 

<pre><code>
pear channel-discover pear.weblogssl.com
pear install -a WSL/WSL_Config
</code></pre>

You will be able to upgrade to future versions of WSL_Config by executing: 

<pre><code>
pear upgrade WSL/WSL_Config
</code></pre> 

h5. SVN

The procedure for checking out the SVN repository is quite simple aswell. You can get the whole set of packages (or any module therein) by executing the following command: 

<pre><code>
svn checkout http://wsl-components.googlecode.com/svn/trunk/ wsl-components-read-only
</code></pre>

h4. Available Packages

Currently we have these packages ready to use: 

h4.  *WSL_Config*

h4.  Introduction

*WSL_Config* is a component that allows you to handle configuration INI files. It also lets you to merge different configuration files.

An example of a INI file structure could be:

<pre><code>
section]
key1="hello"
key2="world"

[section2]
key1="foo"
</code></pre>

h4.  *Installation*

h4.  *PEAR*

<pre><code>
pear channel-discover pear.weblogssl.com
pear install -a WSL/WSL_Config
</code></pre>

h4.  *SVN*

<pre><code>
svn co http://wsl-components.googlecode.com/svn/trunk/Config wsl-components-read-only
</code></pre>

h2.  **Methods**

h4. *Config.php*

* public WSL_Config *__construct*(string $file)


This is the WSL_Config constructor, it creates a WSL_Config object. You need to provide the file path that you want to read. If the file does not exist or cannot be opened, it will throw an exception.


* public array *getSection*(string $section)

This method returns an array containing the data of the section provided through the input parameter.

* public mixed *getValue*(string $section, string $key)

This method returns a specific key value from a section. If the section or the key does not exist in the object, it will return null.

* public boolean *setValue*(string $section, string $key, mixed $value)

This method sets a key-value pair into a section. If the section does not exist, it will be created automatically. The key cannot be null, otherwise the method will raise an exception. The method will return true unless the key is empty.

* public string *getFileName*()

This method returns the file which is being read by the object.

* public array *toArray*()

This method returns an array containing a representing tree of the whole configuration file.

* public void *merge*(WSL_Config $config, boolean $override=true)

This method merges two WSL_Config objects. If $override is true, the original section values will be overridden by the new ones. Otherwise the shared section values will be ignored.

h2. *Examples*

h3. *Example1.Reading configuration from a INI file*

<pre><code>
<?php
    require 'WSL/Config/Config.php';

    try {
        $config = new WSL_Config('file.ini');
    } catch (Exception $e) {
        echo '[ERROR]: '. $e->getMessage();
    }

    // this prints all the information stored
    echo var_dump($config->toArray());
?>


</code></pre> 

h3. *Example 2. Getting a certain value from a INI file*

<pre><code>
<?php
    require 'WSL/Config/Config.php';

    try {
        $config = new WSL_Config('file.ini');
    } catch (Exception $e) {
        echo '[ERROR]: '. $e->getMessage();
    }

    $value = $config->getValue('section', 'key');
?>
</code></pre>

h3. *Example 3. Merging two WSL_Config objects*

Note: This is pretty useful when you try to build a system which can handle several kinds/levels of configuration. At Weblogs SL, we use this in order to have two levels of configuration: general and specific (for each blog): 

<pre><code>
<?php
    require 'WSL/Config/Config.php';

    try {
        $config1 = new WSL_Config('file.ini');
        $config2 = new WSL_Config('file2.ini');
    } catch (Exception $e) {
        echo '[ERROR]: '. $e->getMessage();
    }

    // Now $config1 contains $config2 as well
    $config1->merge($config2);
?>
</code></pre>

 
